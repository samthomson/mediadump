
<div id="admin-backend" class="container" ng-cloak>
	<h4>{{tabSection}}</h4>


	<div class="ui grid">
		<div class="four wide column">
			<div class="ui vertical fluid tabular menu">
				<a class="item" ng-href="#/admin" ng-class="{'active':tabSection == null}">
				overview
				</a>
				<a class="item" ng-href="#/admin/filesources" ng-class="{'active':tabSection == 'filesources'}">
				file sources
				</a>
				<a class="item" ng-href="#/admin/taggers" ng-class="{'active':tabSection == 'taggers'}">
				taggers
				</a>
				<a class="item" ng-href="#/admin/settings" ng-class="{'active':tabSection == 'settings'}">
				settings
				</a>
				<a class="item" ng-href="#/admin/users" ng-class="{'active':tabSection == 'users'}">
				users &amp; groups
				</a>
				<a class="item" ng-href="#/admin/auto" ng-class="{'active':tabSection == 'auto'}">
				auto activity
				</a>
				<a class="item" ng-href="#/admin/stats" ng-class="{'active':tabSection == 'stats'}">
				stats &amp; performance
				</a>
			</div>
		</div>
		<div class="twelve wide stretched column">
			<div ng-show="tabSection == null">overview</div>
			<div ng-show="tabSection == 'filesources'">
				file sources<br/><br/>
				dropbox connected: <strong>{{getMDApp().oUser.bDropbox}}</strong><br/>
				<div ng-show="!getMDApp().oUser.bDropbox">
					<a class="ui button" href="/app/connect/dropbox"><i class="fa fa-dropbox"></i> connect dropbox</a>
				</div>
				<hr/>
				show list of connected sources<br/>

				<ul>
					<li ng-repeat="folder in dropboxFolders"><i class="fa fa-dropbox"></i> {{folder.folder}}</li>
				</ul>
				<hr/>
				<div ng-show="getMDApp().oUser.bDropbox" class="ui segment" ng-class="{loading: addDropboxFolder.loading}">
					<!-- dropbox is connected, so present a a form to let user add new dropbox filesource -->
					<div class="ui icon message" ng-show="formFeedback !== ''">
						<i class="icon fa fa-exclamation-circle"></i>
						<div class="content">
							<div class="header">
								Problem with Dropbox folder
							</div>
							<p ng-bind-html="formFeedback | sanitize"></p>
						</div>
					</div>

					<form ng-submit="addDropboxFileSource()" class="ui form">

						<div class="field">
							<label>Folder</label>
							<div class="ui left icon input">
								<input type="text" name="new-dropbox-folder" placeholder="path of folder within dropbox" ng-model="addDropboxFolder.folder" required>
								<i class="icon fa fa-folder folder"></i>
							</div>
						</div>

						<div class="field">

							<button class="ui basic button right floated" type="submit" ng-disabled="!(addDropboxFolder.tested == addDropboxFolder.folder && addDropboxFolder.folder != '')">
								<i class="fa fa-plus"></i>
								Add this folder
							</button>

							<button class="ui basic button right floated" type="button" ng-disabled="addDropboxFolder.folder == ''" ng-click="testNewDropboxFileSource()">
								<i class="fa fa-check icon"></i>
								test this folder
							</button>
						</div>
					
					</form>
				</div>
			</div>
			<div ng-show="tabSection == 'taggers'">taggers</div>
			<div ng-show="tabSection == 'settings'">settings</div>
			<div ng-show="tabSection == 'users'">users</div>
			<div ng-show="tabSection == 'auto'">auto</div>
			<div ng-show="tabSection == 'stats'">stats</div>
		</div>
	</div>
</div>